namespace = corleone

corleone.1 = { # The Murder of Don Fanucci 
	type = country_event
	placement = root
	title =  corleone.1.t
	desc =   corleone.1.d
	flavor = corleone.1.f

	event_image = {
		video = "southamerica_public_figure_assassination"
	}

	duration = 3

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	trigger = {
		# Triggered by JE
	}

	immediate = {
		
	}

	option = {
		name = corleone.1.a
	}
}

corleone.2 = { # New York Daily Chronicle, November 2, 1922
	type = country_event
	placement = root
	title =  corleone.2.t
	desc =   corleone.2.d
	flavor = corleone.2.f

	event_image = {
		video = "southamerica_public_figure_assassination"
	}

	duration = 3

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	trigger = {
		# Triggered by JE
	}

	immediate = {
		set_global_variable = corleone_2_done
		ruler = {
			save_scope_as = ruler_scope
		}
	}

	option = {
		name = corleone.2.a
	}
}

corleone.3 = { # New York Daily Chronicle, June 6, 1934
	type = country_event
	placement = root
	title =  corleone.3.t
	desc =   corleone.3.d
	flavor = corleone.3.f

	event_image = {
		video = "unspecific_signed_contract"
	}
	
	duration = 3

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	trigger = {
		# Triggered by JE
	}

	immediate = {
		set_global_variable = corleone_3_done
		ruler = {
			save_scope_as = ruler_scope
		}
	}

	option = {
		name = corleone.3.a
		if = {
			limit = {
				any_scope_character = {
					NOT = { has_template = vito_corleone_character_template }
				}
			}
			create_character = {
				template = vito_corleone_character_template
			}
		}
	}
}

corleone.9 = { # The Death of Don Corleone
	type = country_event
	placement = root
	title = corleone.9.t
	desc = corleone.9.d
	flavor = corleone.9.f

	event_image = {
		video = "ep1_printing_press"
	}

	duration = 3

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	trigger = {
		# Triggered by JE
	}

	immediate = {
		random_scope_character = {
			limit = { has_template = vito_corleone_character_template }
			save_scope_as = vito_corleone_scope
		}
		create_character = {
			template = michael_corleone_character_template
		}
		random_scope_character = {
			limit = { has_template = michael_corleone_character_template }
			save_scope_as = michael_corleone_scope
		}
	}
	
	option = {
		name = corleone.9.a
		
		scope:vito_corleone_scope = {
			kill_character = yes
		}
		set_global_variable = vito_corleone_dead_globvar
	}
}


namespace = stoker

stoker.1 = { # The Dmitry sets sails
	type = country_event
	placement = root
	title = stoker.1.t
	desc = stoker.1.d
	flavor = stoker.1.f

	event_image = {
		video = "votp_gunboat_diplomacy"
	}
	
	duration = 3
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	
	trigger = {
		game_date > 1885.7.24
		owns_entire_state_region = STATE_BULGARIA
		s:STATE_BULGARIA = {
			has_building = building_port
		}
		NOT = { has_global_variable = dmitry_set_sails_globvar }
	}
	
	immediate = {
		set_global_variable = dmitry_set_sails_globvar
	}
	
	option = {
		name = stoker.1.a
		default_option = yes
	}
}

stoker.2 = { # The Dmitry is washed ashore
	type = country_event
	placement = root
	title = stoker.2.t
	desc = stoker.2.d
	flavor = stoker.2.f

	event_image = {
		texture = "/gfx/event_images/dmitry_shored.dds"
	}

	duration = 3

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	trigger = {
		game_date > 1885.8.6
		owns_entire_state_region = STATE_YORKSHIRE
		s:STATE_YORKSHIRE = {
			has_building = building_port
		}
		has_global_variable = dmitry_set_sails_globvar
		NOT = { has_global_variable = dmitry_ran_ashore_at_whitby_globvar }
	}

	immediate = {
		set_global_variable = dmitry_ran_ashore_at_whitby_globvar
	}
	
	option = {
		name = stoker.2.a
		default_option = yes

		create_character = {
			template = vlad_character_template
		}
	}
}


namespace = hp_lovecraft

hp_lovecraft.1 = { # H.P. Lovecraft appears
	type = country_event
	placement = root
	title =  hp_lovecraft.1.t
	desc =   hp_lovecraft.1.d
	flavor = hp_lovecraft.1.f

	left_icon = scope:hp_scope

	duration = 3

	gui_window = event_window_1char_tabloid

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	trigger = {
		game_date > 1928.2.13
		NOT = { has_global_variable = hp_happened_globvar }
	}

	immediate = {
		set_global_variable = hp_happened_globvar
		random_country = {
			limit = {
				owns_entire_state_region = STATE_RHODE_ISLAND
			}
			save_scope_as = target_country_scope
		}
		scope:target_country_scope = {
			create_character = {
				template = hp_lovecraft_character_template
			}
		}
		random_scope_character = {
			limit = {
				has_template = hp_lovecraft_character_template
			}
			save_scope_as = hp_scope
		}
	}

	option = {
		name = hp_lovecraft.1.a
		default_option = yes
	}
}

hp_lovecraft.2 = { # H.P. Liebkraft appears
	type = country_event
	placement = root
	title =  hp_lovecraft.2.t
	desc =   hp_lovecraft.2.d
	flavor = hp_lovecraft.2.f

	left_icon = scope:hp_scope

	duration = 3

	gui_window = event_window_1char_tabloid

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	trigger = {
		game_date > 1928.2.13
		NOT = { has_global_variable = hp_happened_globvar }
	}

	immediate = {
		set_global_variable = hp_happened_globvar
		random_country = {
			limit = {
				OR = {
					country_has_primary_culture = cu:north_german
					country_has_primary_culture = cu:south_german
					country_has_primary_culture = cu:alemannic
				}
			}
			save_scope_as = target_country_scope
		}
		scope:target_country_scope = {
			create_character = {
				template = hp_liebkraft_character_template
			}
		}
		random_scope_character = {
			limit = {
				has_template = hp_liebkraft_character_template
			}
			save_scope_as = hp_scope
		}
	}

	option = {
		name = hp_lovecraft.2.a
		default_option = yes
	}
}

hp_lovecraft.3 = { # H.P. dies historically
	type = country_event
	placement = root
	title =  hp_lovecraft.3.t
	desc =   hp_lovecraft.3.d
	flavor = hp_lovecraft.3.f

	left_icon = scope:hp_scope

	duration = 3

	gui_window = event_window_1char_tabloid

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	trigger = {
		game_date > 1937.3.15
		has_global_variable = hp_happened_globvar
		NOT = { has_global_variable = hp_dead_globvar }
	}

	immediate = {
		set_global_variable = hp_dead_globvar
	}

	option = {
		name = hp_lovecraft.3.a
		default_option = yes

		scope:hp_scope = {
			kill_character = yes
		}
	}
}


namespace = milei

milei.1 = {
	type = country_event
	placement = root
	title =  milei.1.t
	desc =   milei.1.d
	flavor = milei.1.f

	duration = 3

	event_image = {
		video = "ep1_printing_press"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	trigger = {
		NOT = { has_global_variable = milei_happened_globvar }
		has_healthy_economy = no
		bureaucracy < 0
		tax_level >= high
		owns_entire_state_region = STATE_BUENOS_AIRES
		country_has_primary_culture = cu:argentine
		has_technology_researched = anarchism
		NAND = {
			has_law = law_type:law_no_social_security
			OR = {
				has_law = law_type:law_no_health_system
				has_law = law_type:law_private_health_insurance
			}
			OR = {
				has_law = law_type:law_no_schools
				has_law = law_type:law_private_schools
			}
			has_law = law_type:law_no_colonial_affairs
			has_law = law_type:law_no_home_affairs
			has_law = law_type:law_no_workers_rights
			NOT = { has_law = law_type:law_total_war }
			OR = {
				has_law = law_type:law_no_police
				has_law = law_type:law_anarchist_police
			}
		}
	}

	immediate = {
		set_global_variable = milei_happened_globvar
	}

	option = {
		name = milei.1.a
		default_option = yes

		create_character = {
			template = milei_character_template
		}
	}
}
