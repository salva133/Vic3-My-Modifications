namespace = albion

# Make Oberon leader
albion.1 = {
	type = country_event
	placement = ROOT
	title = albion.1.tt
	desc = albion.1.dd
	flavor = albion.1.ff

	event_image = {
		texture = gfx/coat_of_arms/textured_emblems/albion.dds
	}

	trigger = {
		NOT = { has_global_variable = oberon_happened_globvar }
	}

	immediate = {
		random_scope_character = {
			limit = {
				has_template = oberon_character_template
			}
			save_scope_as = oberon_scope
		}
	}

	option = {
		name = albion.1.a
		default_option = yes

		scope:oberon_scope = {
			set_character_as_ruler = yes
		}
	}
}

# Albion seceedes from Britain
albion.2 = {
	type = country_event
	placement = ROOT
	title = albion.2.tt
	desc = albion.2.dd
	flavor = albion.2.ff

	event_image = {
		texture = gfx/coat_of_arms/textured_emblems/albion.dds
	}

	trigger = {
		NOT = {
			exists = c:ABI
			has_global_variable = albion_seceeded_globvar
		}
		owns_entire_state_region = STATE_LANCASHIRE
		s:STATE_LANCASHIRE = {
			any_scope_state = {
				radical_fraction = {
					value = 0.5
				}
				OR = {
					any_scope_pop = {
						percent = 0.4
						culture = cu:albionian
					}
					any_scope_pop = {
						percent = 0.4
						religion = rel:druidism
					}
				}
			}
		}
	}

	immediate = {
		set_global_variable = albion_seceeded_globvar
		create_albion = yes
		c:ABI = {
			set_up_albion_gov = yes
		}
	}

	option = {
		name = albion.2.a
		default_option = yes

		set_up_albionian_claims = yes
		c:ABI = {
			create_character = {
				template = oberon_character_template
				on_created = {
					set_character_as_ruler = yes
				}
			}
		}
	}

	option = {
		name = albion.2.b

		trigger = {
			c:GBR = this
		}

		set_up_albionian_claims = yes
		play_as = c:ABI
		c:ABI = {
			create_character = {
				template = oberon_character_template
				on_created = {
					set_character_as_ruler = yes
				}
			}
		}
	}
}
